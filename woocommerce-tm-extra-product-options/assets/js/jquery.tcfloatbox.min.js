!function(s){"use strict";function o(t,e){return this.element=s(t),this.settings=s.extend({},s.fn.tcFloatBox.defaults,e),this.settings.type="<"+this.settings.type+">",1===this.element.length&&(this.init(),this)}o.prototype={constructor:o,destroy:function(){var t=this.settings;return void 0!==this.instance&&(s.fn.tcFloatBox.instances.splice(this.instance,1),delete this.instance,t.hideelements&&s("embed, object, select").css({visibility:"visible"}),t._ovl&&t._ovl.off(),s(t.floatboxIDMain).remove(),this.element.removeData("tcfloatbox"),s(window).off("scroll.tcfloatbox"+this.instance),s(window).off("resize.tcfloatbox"+this.instance)),this},hide:function(){var t=this.settings;t.hideelements&&s("embed, object, select").css({visibility:"visible"}),!0===t.showoverlay&&t._ovl&&t._ovl.removeClass("fl-overlay"),s(t.floatboxID).addClass("tc-closing").removeClass(t.animateIn).addClass(t.animateOut),s(t.floatboxID).animate({opacity:0},t.closefadeouttime,function(){s(t.floatboxIDMain).hide(),s(t.floatboxID).removeClass("tc-closing").addClass("tc-closed")}),s(window).off("scroll.tcfloatbox"+this.instance),s(window).off("resize.tcfloatbox"+this.instance)},show:function(){var e=this.settings;1===this.element.length&&(void 0===this.instance&&this.init(),e.hideelements&&s("embed, object, select").css({visibility:"hidden"}),!0===e.showoverlay&&(e._ovl||(e._ovl=e.main,e._ovl.css({zIndex:parseInt(e.zIndex,10)-1}),e.ismodal)||(e.cancelEvent||e.unique?e._ovl.on("click",function(t){t.target===s(e.floatboxID)[0]||s(t.target).closest(e.floatboxID).length||this.applyCancelEvent.call(this,this)}.bind(this)):e._ovl.on("click",function(t){t.target===s(e.floatboxID)[0]||s(t.target).closest(e.floatboxID).length||e.cancelfunc.call(this,this)}.bind(this))),e._ovl.addClass("fl-overlay")),e.showfunc&&e.showfunc.call(),s(e.floatboxID).removeClass("tc-closing tc-closed").addClass(e.animationBaseClass+" "+e.animateIn),s(e.floatboxID).addClass("flasho-center"))},applyCancelEvent:function(){var t=this.settings;!0===t.cancelEvent?this.destroy():"function"==typeof t.cancelEvent&&t.cancelEvent.call(this,this)},applyCancelEventFromKey:function(t){27===t.which&&this.applyCancelEvent()},applyUpdateEvent:function(){var t=this.settings;"function"==typeof t.updateEvent&&t.updateEvent.call(this,this)},applyUpdateEventFromKey:function(t){13===t.which&&this.applyUpdateEvent()},init:function(){var t,e=this.settings;1===this.element.length&&(0<s.fn.tcFloatBox.instances.length&&(e.zIndex=parseInt(s.fn.tcFloatBox.instances[s.fn.tcFloatBox.instances.length-1].zIndex,10)+100),this.instance=s.fn.tcFloatBox.instances.length,s.fn.tcFloatBox.instances.push(e),e.id=e.id+this.instance,e.floatboxID="#"+s.epoAPI.dom.id(e.id),e.idMain===e.id&&(e.idMain="main-"+e.idMain),e.idMain=e.idMain+this.instance,e.floatboxIDMain="#"+s.epoAPI.dom.id(e.idMain),this.hide(),t=s("<div>").attr("id",e.idMain).addClass(e.classnameMain),s(e.type).attr("id",e.id).addClass(e.classname).html(e.data).appendTo(t),t.appendTo(this.element),e.main=t,(e.leger?s(e.floatboxIDMain):s(e.floatboxID)).css({width:e.width,height:e.height}),e.minWidth&&s(e.floatboxID).css({"min-width":e.minWidth}),e.minHeight&&s(e.floatboxID).css({"min-height":e.minHeight}),e.maxWidth&&s(e.floatboxID).css({"max-width":e.maxWidth}),e.maxHeight&&s(e.floatboxID).css({"max-height":e.maxHeight}),s(e.floatboxIDMain).css({"z-index":e.zIndex}),this.cancelfunc=e.cancelfunc,e.cancelEvent&&e.cancelClass&&(s(e.floatboxID).find(e.cancelClass).on("click",this.applyCancelEvent.bind(this)),e.isconfirm)&&s(document).off("keyup.escape-"+e.floatboxID).on("keyup.escape-"+e.floatboxID,this.applyCancelEventFromKey.bind(this)),e.updateEvent&&e.updateClass&&(s(e.floatboxID).find(e.updateClass).on("click",this.applyUpdateEvent.bind(this)),e.isconfirm)&&s(document).off("keyup.enter-"+e.floatboxID).on("keyup.enter-"+e.floatboxID,this.applyUpdateEventFromKey.bind(this)),this.show())}},s.fn.tcFloatBox=function(t){var e,n=s(this),i=n.data("tcfloatbox"),a="object"==typeof t?t:{};return i||(i=new o(this,a),n.data("tcfloatbox",i)),void 0===(e="string"==typeof t?i[t].apply(i,[]):e)?n:e},s.fn.tcFloatBox.defaults={idMain:"floatbox",classnameMain:"floatbox",leger:!1,id:"flasho",classname:"flasho",type:"div",data:"",width:"auto",height:"auto",minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,closefadeouttime:1e3,animationBaseClass:"tm-animated",animateIn:"fadein",animateOut:"fadeout",fps:4,hideelements:!1,showoverlay:!0,zIndex:100100,ismodal:!1,cancelfunc:o.prototype.hide,showfunc:null,cancelEvent:!0,cancelClass:".floatbox-cancel",updateEvent:!1,updateClass:!1,unique:!0,isconfirm:!1},s.fn.tcFloatBox.instances=[],s.fn.tcFloatBox.Constructor=o,s.tcFloatBox=function(t){var e=s("body"),n=!1;return e.map(function(){return s(this).data("tcfloatbox")||""}).get().some(function(t){return""===t})||t.unique?(n=new o(e,t),e.data("tcfloatbox",n)):(n=e.data("tcfloatbox")).init(),n}}(window.jQuery);